---
name: ppt_layout
description: 针对单页 PPT 大纲的标题和内容概要，通过【语义量化】确定节点数 N，结合【元素载体】判定 Carrier，最终锁定【空间布局】Layout。输出用于前端渲染的施工级 JSON。
---

# 概念介绍
## Count(N): 基于大纲的标题和内容概要进行语义分析，预判信息点的数量。
## Carrier (载体)：基于语义性质（数据、实物、逻辑、步骤）决定用什么视觉元素承载。视觉元素包括“图表”、“纯文字”、“表格”、“时间轴”等。
## Layout(布局): 由 N 和 Carrier 共同决定。N 决定容器大小，Carrier 决定容器形状。

# 执行流程
## 第一步：信息节点量化 (Quantify N)
**原则**：内容决定 N，严禁“布局倒逼内容”。
我们将 N 的判定过程分为三个硬性阶段：
1. 关键词与标点符号扫描 (Physical Scan)
* 连接词拆分：扫描内容概要中的并列连词（如：与、及其、以及、和、及）。
  * 案例分析：“展望...发展前景 并 总结...深远影响”。
  * 判定结果：识别到连词“并”，其前后分别指向两个不同的业务动作 -> N >= 2。
* 标点符号拆分：扫描顿号（、）、分号（；）、逗号（，）。
  * 每一个被符号分隔且具备独立主谓宾结构的短语，计为 1 个 Slot。
2. 语义实体提取 (Entity Extraction)
* 名词中心词提取：提取概要中的核心名词。
  * 案例分析：识别到“智能化”、“网联化”、“发展前景”、“深远影响”。
  * 逻辑重组：
    * “智能化、网联化方向的发展前景”（这是一个整体话题，或可拆分为两个技术点）。
    * “对交通出行的深远影响”（这是一个结论点）。
  * 判定结果：根据并列关系，本页包含 2个或3个 核心信息点。
3. N 值修正与“去 Hero”防御 (The "Anti-Hero" Defense)
  为了防止总结页塌缩为 CENTER_HERO，引入以下硬性修正：
  * 大纲为封面页 或 大纲概要中表达“感谢”时，N 为 1， 其他情况全部强制 N >= 2;
  * 包含“并、且、及”等动词连接词，强制按动作拆分为两个 Slot，强制 N >= 2;
  * 包含多个名词并列，强制按名词数量 N 建立 Slot，N = 名词数；
  * 语义属于“总结、意义、前景”等，优先匹配多栏布局（SPLIT/TRIP），提升逻辑厚度。

## 第二步：判定载体类型 Carrier
**规则**：
- 大幅放宽图表与表格的判定标准，引入“逻辑转化”
- 根据语义关键词特征及预判的字数密度，决定视觉容器Carrier的类型

```python
# 1. 优先判定表格 (TABLE) - 强调多维度对比
if 包含(["对比", "差异", "优劣", "成员", "名单", "属性", "核心参数"]) or (N > 5 且非时序):
    carrier = "TABLE"
# 2. 判定图表 (CHART) - 强调程度、量化、趋势
elif 包含(["数据", "比例", "趋势", "量化", "成效", "表现", "份额", "规模"]) or 包含("极、大、升、降、快"):
    # 即使没有数字，只要有描述程度的形容词，也强制转为 CHART 模式
    carrier = "CHART"
elif 包含(["步骤", "历程", "演变", "阶段", "流程"]) or 相似语义:
    carrier = "STEP"
elif len(预判内容文本) > 20 or 语义 == "抽象观点/长定义":
    carrier = "TEXT"      # 纯文模式：注重深度与阅读，无图标
else:
    carrier = "ICON_TXT"  # 默认组合：短促要点，适合配图标装饰
```

## 第三步: 布局路由映射 (Layout Routing)
**规则**：基于 N 和 Carrier，判定Layout。此步骤为最高优先级指令，禁止跨越 N 的区间选择布局。
**决策优先级**：Carrier > N
| N | Carrier | 最终布局 (Layout) | 组合模式 (Combo) |说明｜
|:--------|:--------:|--------:|--------:|------------|
|	2	| CHART | SPLIT	| CHT_TXT | 左侧图表，右侧数据解读 |
|	2-8 |	TABLE |	FULL | TAB | 强制首选：只要实体超过 5 个或有属性比对，必须生成 4-6 行的高密度表格。 |
| 1 | TEXT | CENTER | HERO | 仅限场景 B：封面页内容、单纯的感谢、联系方式、单行短口号（<15字）。**禁用于：内容总结、意义阐述、长定义。** |
| 1 | TEXT | SPLIT | TXT_TXT | 语义溢出重定向：若 N=1 但内容超过 20 字或属于“赏析/总结/意义”等，**强制升级为 N=2 的 SPLIT** |
|	2	| TXT | SPLIT | TXT_TXT | 双文对冲：左右纯文字块，中轴线分割 |
|	2	| ICON_TXT | SPLIT | ICON_TXT | 左文，右文对折，每列带一个小图标 |
|	3	| ICON_TXT | TRIP | ICON_TXT | 三栏并列布局，每列带一个小图标。**严禁在此数量下使用 GRID 或 SPLIT。** |
|	3-5 | STEP | TIME |	STEP | 水平或折线时间轴 |
| 4 | ICON_TXT | GRID | ICON_TXT | 2x2 矩阵。视觉最稳固的四宫格。|
| 5-6 | ICON_TXT | GRID | ICON_TXT | 2x3 或 3x2 矩阵。|
  
**严格遵守**：
  * 预判内容长度，如果超过50字，禁止使用 CENTER | HERO
  * 触发 CENTER | HERO (N=1) 的逻辑：仅限大纲内容概要中包含类似“金句、号召、感谢”等，或者大纲是封面页。
  * 表格优先：只要 Carrier == TABLE，Layout 必须无视 N 的值，强制锁定 FULL | TAB。
  * 时间/步骤优先：只要 Carrier == STEP，Layout 必须无视 N 的值，强制锁定 TIME | STEP。

## 第四步: 施工级 JSON 输出 (Structured Output)
### 输出格式
Agent 必须严格按照以下格式输出，禁止包含解释性文字：
```json
{
  "n": "节点数",
  "config": "<LAYOUT> | <COMBO>", // 核心决策：布局 | 视觉组合模式
  "data": [  // 槽位数据：按 A, B, C 顺序排列 
    {
      "type": "CHT | TAB | ICON_TXT | TXT | STEP",  
      "desc": "详细描述或数据数组"
    }
  ],
}
```
json字段说明：
* config：物理框架，决定了页面的空间结构和视觉风格组合
  * 布局标识 (Layout)如 SPLIT、GRID，它规定了屏幕被切分成几个块，以及这些块的坐标、宽高比。
  * 模式标识 (Combo)：如 CHT_TXT、ICON_TXT。它预设了每个块内部的组件（例如：左图表右文、 左文右文）。
* data：语义实体
  * type：定义了该信息的性质（它是表、还是纯文本）
  * desc：简要说明当前信息点需要阐述的内容

### 槽位填充准则
* CENTER 布局：data 数组长度必须正好为 1。
* SPLIT 布局：data 数组长度必须正好为 2。
* TRIP 布局 (N=3)：data 数组长度必须正好为 3。
* GRID 布局 (N=4)：data 数组长度必须正好为 4。
* GRID 布局 (N=6)：data 数组长度必须正好为 6。
* TIME 布局 (N=n)：data 数组长度必须正好为 n。
* FULL ｜TAB 布局：data 数组长度必须正好为 1。

### 审计与纠偏
* 禁止行为：禁止在 N=3 时输出 GRID | ICON_TXT。
* 禁止行为：禁止在 N=1 且内容很多时使用 CENTER | HERO（会导致文字溢出），必须升级为 SPLIT。
* 样式提醒：所有生成的 desc 严禁超过 15 个字。


### 输出路由映射
根据布局路由映射表得到的 LAYOUT 和 COMBO共同构成了config字段，由config对所有 data 数组构成 及 视觉效果的对应情况做如下列举：

| LAYOUT和COMBO | data 数组构成（JSON 结构） | 渲染视觉效果 (Visual Output) |
|:--------|:--------:|------------|
|CENTER \| HERO|[{ "type": "TXT", "desc": "简要描述" }]|极致简约：大号字体位于屏幕正中央。|
|SPLIT \| CHT_TXT|[{ "type": "CHT", "desc": "简要描述" }, { "type": "TXT", "desc": "简要描述" }]|专业数据：左侧为动态图表（饼/柱/折），右侧为核心洞察。|
|SPLIT \| TXT_TXT|[{ "type": "TXT", "desc": "简要描述" }, { "type": "TXT", "desc": "简要描述" }]|严谨辩论：左右对半分，中间有明显的垂直分割线，适合对比。|
|SPLIT \| ICON_TXT|[{ "type": "ICON_TXT", "desc": "简要描述" }, { "type": "ICON_TXT", "desc": "简要描述" }]|轻量展示：双栏结构，每个标题上方配有醒目的装饰图标。|
|TRIP \| ICON_TXT|[{ "type": "ICON_TXT", "desc": "简要描述" } * 3]|三足鼎立：页面等分为三列，每列包含 \[图标+标题+描述\]。|
|TIME \| STEP|[{ "type": "STEP", "desc": "简要描述" } * n]|线性流动：有一条贯穿全屏的水平轴，节点沿轴线分布。|
|FULL \| TAB|[{ "type": "TAB", "desc": "简要描述" }]|高密度信息：表格占据屏幕 90% 宽度，适用于复杂参数对比。|
|GRID \| ICON_TXT|[{ "type": "ICON_TXT", "desc": "简要描述" } * n]|矩阵平衡：2x2 或 2x3 的方块阵列，整齐划一，适合多项介绍。|

说明：
* 数据槽位的“顺位继承”：渲染引擎在解析 SPLIT（对拆布局）时，默认遵循 “左视觉，右逻辑” 的原则
  * data[0] 始终填充到 左侧 (Slot-A)
  * data[1] 始终填充到 右侧 (Slot-B)。


