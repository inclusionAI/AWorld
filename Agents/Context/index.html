
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://github.com/inclusionAI/AWorld/Agents/Context/">
      
      
        <link rel="prev" href="../Custom%20Agent/">
      
      
        <link rel="next" href="../Runtime/Overview/">
      
      
        
      
      
      <link rel="icon" href="../../imgs/logo.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.3">
    
    
      
        <title>Context - AWorld (Agent World) harness</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inter:300,300i,400,400i,700,700i%7CJetBrains+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Inter";--md-code-font:"JetBrains Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../css/aworld.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="deep-purple">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#1-core-challenge-why-context-engineering" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="AWorld (Agent World) harness" class="md-header__button md-logo" aria-label="AWorld (Agent World) harness" data-md-component="logo">
      
  <img src="../../imgs/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            AWorld (Agent World) harness
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Context
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="deep-purple"  aria-hidden="true"  type="radio" name="__palette" id="__palette_0">
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="blue" data-md-color-accent="deep-purple"  aria-hidden="true"  type="radio" name="__palette" id="__palette_1">
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/inclusionAI/AWorld" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    inclusionAI/AWorld
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../Get%20Start/Overview/" class="md-tabs__link">
          
  
  
  Guides

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../Build%20Agent/" class="md-tabs__link">
          
  
  
  Agents

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../Environment/Overview/" class="md-tabs__link">
          
  
  
  Environment

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../Training/Trainer/" class="md-tabs__link">
          
  
  
  Training

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../Deployment/OceanBase/" class="md-tabs__link">
          
  
  
  Deployment

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="AWorld (Agent World) harness" class="md-nav__button md-logo" aria-label="AWorld (Agent World) harness" data-md-component="logo">
      
  <img src="../../imgs/logo.png" alt="logo">

    </a>
    AWorld (Agent World) harness
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/inclusionAI/AWorld" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    inclusionAI/AWorld
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" >
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Guides
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    Guides
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Get%20Start/Overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Get%20Start/Quick%20Start/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Quick Start
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Get%20Start/Core%20Capabilities/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Core Capabilities
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Get%20Start/Parallel%20Tasks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Parallel Tasks
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Get%20Start/Streaming%20Response/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Streaming Response
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Get%20Start/HITL/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Human in the Loop (HITL)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Agents
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Agents
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Build%20Agent/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Build Agent
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Build%20Multi-Agent%20System%28MAS%29/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Multi-Agent System(MAS)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Build%20WorkFlow/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Workflow
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Custom%20Agent/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Custom Agent
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Context
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Context
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-core-challenge-why-context-engineering" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. Core Challenge: Why Context Engineering?
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-context-anatomy" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. Context Anatomy
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. Context Anatomy">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-guidance-context" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.1 Guidance Context
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-evidential-data" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.2 Evidential Data
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#23-immediate-information" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.3 Immediate Information
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-core-architecture-amnicontext" class="md-nav__link">
    <span class="md-ellipsis">
      
        3. Core Architecture: AmniContext
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. Core Architecture: AmniContext">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31-design-philosophy-a-m-n-i" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.1 Design Philosophy (A-M-N-I)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-hierarchical-structure-and-memory-model" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.2 Hierarchical Structure and Memory Model
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-basic-usage" class="md-nav__link">
    <span class="md-ellipsis">
      
        4. Basic Usage
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4. Basic Usage">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#41-initialization-and-creation" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.1 Initialization and Creation
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#42-neurons-assembly" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.2 Neurons &amp; Assembly
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4.2 Neurons &amp; Assembly">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-context-processing-pipeline-op-neuron" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. Context Processing Pipeline: Op -&gt; Neuron
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-variable-access-and-auto-assembly" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. Variable Access and Auto-Assembly
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-customization" class="md-nav__link">
    <span class="md-ellipsis">
      
        3. Customization
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-advanced-prompt-assembly-example" class="md-nav__link">
    <span class="md-ellipsis">
      
        4. Advanced Prompt Assembly Example
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#43-knowledge-usage" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.3 Knowledge Usage
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4.3 Knowledge Usage">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adding-knowledge" class="md-nav__link">
    <span class="md-ellipsis">
      
        Adding Knowledge
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#referencing-knowledge-in-prompt" class="md-nav__link">
    <span class="md-ellipsis">
      
        Referencing Knowledge in Prompt
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-advanced-usage" class="md-nav__link">
    <span class="md-ellipsis">
      
        5. Advanced Usage
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5. Advanced Usage">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#51-context-offloading" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.1 Context Offloading
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#52-hierarchical-tasks-planning" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.2 Hierarchical Tasks &amp; Planning
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5.2 Hierarchical Tasks &amp; Planning">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#core-capabilities-multi-task-decomposition-and-parallelism" class="md-nav__link">
    <span class="md-ellipsis">
      
        Core Capabilities: Multi-task Decomposition and Parallelism
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-task-lifecycle-in-planning-mode" class="md-nav__link">
    <span class="md-ellipsis">
      
        Example: Task Lifecycle in Planning Mode
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parallel-execution-support" class="md-nav__link">
    <span class="md-ellipsis">
      
        Parallel Execution Support
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#53-agent-isolation" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.3 Agent Isolation
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#54-environment-integration-freedom-space" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.4 Environment Integration &amp; Freedom Space
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5.4 Environment Integration &amp; Freedom Space">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#core-features" class="md-nav__link">
    <span class="md-ellipsis">
      
        Core Features
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-configuration-and-usage" class="md-nav__link">
    <span class="md-ellipsis">
      
        Example: Configuration and Usage
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#path-variable-reference" class="md-nav__link">
    <span class="md-ellipsis">
      
        Path Variable Reference
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#55-autonomous-cognition" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.5 Autonomous Cognition
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-scenario-based-strategies" class="md-nav__link">
    <span class="md-ellipsis">
      
        6. Scenario-based Strategies
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="6. Scenario-based Strategies">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#61-scenario-1-simple-chat" class="md-nav__link">
    <span class="md-ellipsis">
      
        6.1 Scenario 1: Simple Chat
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#62-scenario-2-complex-research-rag" class="md-nav__link">
    <span class="md-ellipsis">
      
        6.2 Scenario 2: Complex Research (RAG)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#63-scenario-3-planning-intensive-tasks" class="md-nav__link">
    <span class="md-ellipsis">
      
        6.3 Scenario 3: Planning Intensive Tasks
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#64-scenario-4-code-sandbox-collaboration" class="md-nav__link">
    <span class="md-ellipsis">
      
        6.4 Scenario 4: Code Sandbox Collaboration
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#7-best-practices-guide" class="md-nav__link">
    <span class="md-ellipsis">
      
        7. Best Practices Guide
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_6" >
        
          
          <label class="md-nav__link" for="__nav_2_6" id="__nav_2_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Runtime
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Runtime
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Runtime/Overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Runtime/Custom%20Runner/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Custom Runner
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Runtime/Hooks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Hooks
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Memory/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Memory
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Trace/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Trace
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Environment
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Environment
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Environment/Overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Environment/Using%20API/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Using API
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Environment/Env%20Client/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Env Client
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Environment/Advanced%20Capabilities/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Advanced Capabilities
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Training
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Training
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Training/Trainer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Trainer
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Training/Trajectory/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Trajectory
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Training/Evaluation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Evaluation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Deployment
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Deployment
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Deployment/OceanBase/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Oceanbase
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-core-challenge-why-context-engineering" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. Core Challenge: Why Context Engineering?
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-context-anatomy" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. Context Anatomy
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. Context Anatomy">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-guidance-context" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.1 Guidance Context
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-evidential-data" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.2 Evidential Data
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#23-immediate-information" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.3 Immediate Information
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-core-architecture-amnicontext" class="md-nav__link">
    <span class="md-ellipsis">
      
        3. Core Architecture: AmniContext
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. Core Architecture: AmniContext">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31-design-philosophy-a-m-n-i" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.1 Design Philosophy (A-M-N-I)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-hierarchical-structure-and-memory-model" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.2 Hierarchical Structure and Memory Model
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-basic-usage" class="md-nav__link">
    <span class="md-ellipsis">
      
        4. Basic Usage
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4. Basic Usage">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#41-initialization-and-creation" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.1 Initialization and Creation
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#42-neurons-assembly" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.2 Neurons &amp; Assembly
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4.2 Neurons &amp; Assembly">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-context-processing-pipeline-op-neuron" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. Context Processing Pipeline: Op -&gt; Neuron
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-variable-access-and-auto-assembly" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. Variable Access and Auto-Assembly
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-customization" class="md-nav__link">
    <span class="md-ellipsis">
      
        3. Customization
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-advanced-prompt-assembly-example" class="md-nav__link">
    <span class="md-ellipsis">
      
        4. Advanced Prompt Assembly Example
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#43-knowledge-usage" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.3 Knowledge Usage
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4.3 Knowledge Usage">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adding-knowledge" class="md-nav__link">
    <span class="md-ellipsis">
      
        Adding Knowledge
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#referencing-knowledge-in-prompt" class="md-nav__link">
    <span class="md-ellipsis">
      
        Referencing Knowledge in Prompt
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-advanced-usage" class="md-nav__link">
    <span class="md-ellipsis">
      
        5. Advanced Usage
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5. Advanced Usage">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#51-context-offloading" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.1 Context Offloading
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#52-hierarchical-tasks-planning" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.2 Hierarchical Tasks &amp; Planning
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5.2 Hierarchical Tasks &amp; Planning">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#core-capabilities-multi-task-decomposition-and-parallelism" class="md-nav__link">
    <span class="md-ellipsis">
      
        Core Capabilities: Multi-task Decomposition and Parallelism
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-task-lifecycle-in-planning-mode" class="md-nav__link">
    <span class="md-ellipsis">
      
        Example: Task Lifecycle in Planning Mode
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parallel-execution-support" class="md-nav__link">
    <span class="md-ellipsis">
      
        Parallel Execution Support
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#53-agent-isolation" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.3 Agent Isolation
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#54-environment-integration-freedom-space" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.4 Environment Integration &amp; Freedom Space
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5.4 Environment Integration &amp; Freedom Space">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#core-features" class="md-nav__link">
    <span class="md-ellipsis">
      
        Core Features
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-configuration-and-usage" class="md-nav__link">
    <span class="md-ellipsis">
      
        Example: Configuration and Usage
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#path-variable-reference" class="md-nav__link">
    <span class="md-ellipsis">
      
        Path Variable Reference
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#55-autonomous-cognition" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.5 Autonomous Cognition
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-scenario-based-strategies" class="md-nav__link">
    <span class="md-ellipsis">
      
        6. Scenario-based Strategies
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="6. Scenario-based Strategies">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#61-scenario-1-simple-chat" class="md-nav__link">
    <span class="md-ellipsis">
      
        6.1 Scenario 1: Simple Chat
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#62-scenario-2-complex-research-rag" class="md-nav__link">
    <span class="md-ellipsis">
      
        6.2 Scenario 2: Complex Research (RAG)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#63-scenario-3-planning-intensive-tasks" class="md-nav__link">
    <span class="md-ellipsis">
      
        6.3 Scenario 3: Planning Intensive Tasks
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#64-scenario-4-code-sandbox-collaboration" class="md-nav__link">
    <span class="md-ellipsis">
      
        6.4 Scenario 4: Code Sandbox Collaboration
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#7-best-practices-guide" class="md-nav__link">
    <span class="md-ellipsis">
      
        7. Best Practices Guide
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
    <a href="https://github.com/inclusionAI/AWorld/tree/main/docs/Agents/Context.md" title="Edit this page" class="md-content__button md-icon" rel="edit">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg>
    </a>
  
  


  <h1>Context</h1>

<blockquote>
<p><strong>First Principle</strong>: The performance bottleneck of large models lies not in parameter count, but in the "quality of context" they perceive. Despite expanding context windows, research has found a "<strong>Context Rot</strong>" phenomenon: as the number of tokens increases, the model's ability to accurately recall information decreases. Context engineering is the connector between an Agent's "digital brain" and the real world, and it is the <strong>natural evolution of Prompt Engineering</strong> â€” shifting from simple instruction writing to the dynamic curation and maintenance of the optimal token set during the LLM's reasoning process.
</p>
</blockquote>
<hr />
<h2 id="1-core-challenge-why-context-engineering">1. Core Challenge: Why Context Engineering?</h2>
<p>In long sequences and complex Agent tasks, simply increasing the window size does not solve all problems; instead, it brings the following challenges:</p>
<ol>
<li><strong>Context Rot</strong>: LLMs have an "attention budget." Due to the limitations of the Transformer architecture, excessively long contexts lead to a significant decline in the model's ability to extract information from the middle (Lost in the middle).</li>
<li><strong>Noise &amp; Entropy</strong>: Massive raw tool outputs and redundant logs drown out key instructions.</li>
<li><strong>State Hallucination</strong>: Stale information in long-term memory conflicts with the latest state in the real-time Workspace, leading to decision bias.</li>
<li><strong>RAG Semantic Loss</strong>: Traditional document chunking destroys context integrity, resulting in retrieved fragments that lack interpretability.</li>
</ol>
<hr />
<h2 id="2-context-anatomy">2. Context Anatomy</h2>
<p>AWorld deconstructs the context load into three core components to achieve fine-grained management:</p>
<h3 id="21-guidance-context">2.1 Guidance Context</h3>
<p>Defines the Agent's basic reasoning mode and behavioral boundaries:</p>
<ul>
<li><strong>System Instructions</strong>: Roles, capabilities, and constraints.</li>
<li><strong>Tool Definitions</strong>: API schema descriptions (supports dynamic loading via MCP).</li>
<li><strong>Few-Shot Examples</strong>: Guides the model to follow specific reasoning chains.</li>
</ul>
<h3 id="22-evidential-data">2.2 Evidential Data</h3>
<p>Substantive basis for Agent reasoning:</p>
<ul>
<li><strong>Long-Term Memory</strong>: User preferences, factual knowledge, cross-session experiences.</li>
<li><strong>External Knowledge</strong>: Document fragments retrieved via RAG.</li>
<li><strong>Tool/Sub-Agent Outputs</strong>: Intermediate results during task execution.</li>
</ul>
<h3 id="23-immediate-information">2.3 Immediate Information</h3>
<p>Places the Agent within the current interaction flow:</p>
<ul>
<li><strong>Dialogue History</strong>: Round-by-round records to maintain coherence.</li>
<li><strong>Scratchpad</strong>: Records intermediate reasoning processes.</li>
<li><strong>User Prompt</strong>: The specific query currently needing resolution.</li>
</ul>
<hr />
<h2 id="3-core-architecture-amnicontext">3. Core Architecture: AmniContext</h2>
<p>AWorld is based on the <strong>AmniContext</strong> framework, countering context rot through <strong>active control</strong> rather than passive stacking.</p>
<h3 id="31-design-philosophy-a-m-n-i">3.1 Design Philosophy (A-M-N-I)</h3>
<ul>
<li><strong>A (Ant)</strong>: Carries the engineering heritage of Ant Group in distributed architecture and large-scale collaboration.</li>
<li><strong>M (Mind)</strong>: Simulates the interaction between human working memory and long/short-term memory.</li>
<li><strong>N (Neuro)</strong>: Mimics neural network information indexing and association.</li>
<li><strong>I (Intelligence)</strong>: Drives high-quality intelligent decision-making.</li>
</ul>
<h3 id="32-hierarchical-structure-and-memory-model">3.2 Hierarchical Structure and Memory Model</h3>
<p>Context supports <strong>tree-based hierarchical referencing</strong>, achieving information sharing and isolation through an upward backtracing mechanism:</p>
<table>
<thead>
<tr>
<th style="text-align: left;">Memory Layer</th>
<th style="text-align: left;">Storage Location</th>
<th style="text-align: left;">Function</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><strong>Working Memory</strong></td>
<td style="text-align: left;">Memory / TaskState</td>
<td style="text-align: left;">Real-time decision making, stores current step KV data</td>
</tr>
<tr>
<td style="text-align: left;"><strong>Short Memory</strong></td>
<td style="text-align: left;">Checkpoint / Memory</td>
<td style="text-align: left;">Maintains task continuity, includes dialogue history and trajectories</td>
</tr>
<tr>
<td style="text-align: left;"><strong>Long Memory</strong></td>
<td style="text-align: left;">Vector DB / UserProfile</td>
<td style="text-align: left;">Cross-session personalization, stores user profiles and factual knowledge</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="4-basic-usage">4. Basic Usage</h2>
<p>Basic usage covers the core operations required to build standard Agent tasks.</p>
<h3 id="41-initialization-and-creation">4.1 Initialization and Creation</h3>
<p>Before starting, middlewares need to be initialized to enable memory and retrieval functions.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">aworld.core.context.amni</span><span class="w"> </span><span class="kn">import</span> <span class="n">ApplicationContext</span><span class="p">,</span> <span class="n">TaskInput</span><span class="p">,</span> <span class="n">init_middlewares</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="kn">from</span><span class="w"> </span><span class="nn">aworld.core.context.amni.config</span><span class="w"> </span><span class="kn">import</span> <span class="n">AmniConfigFactory</span><span class="p">,</span> <span class="n">AmniConfigLevel</span>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="c1"># 1. Initialize middlewares (Enable SQLite memory backend and retriever)</span>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="n">init_middlewares</span><span class="p">()</span>
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="c1"># 2. Create task input</span>
</span><span id="__span-0-8"><a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="n">task_input</span> <span class="o">=</span> <span class="n">TaskInput</span><span class="p">(</span>
</span><span id="__span-0-9"><a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a>    <span class="n">user_id</span><span class="o">=</span><span class="s2">&quot;user_001&quot;</span><span class="p">,</span>
</span><span id="__span-0-10"><a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a>    <span class="n">session_id</span><span class="o">=</span><span class="s2">&quot;session_001&quot;</span><span class="p">,</span>
</span><span id="__span-0-11"><a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a>    <span class="n">task_id</span><span class="o">=</span><span class="s2">&quot;task_001&quot;</span><span class="p">,</span>
</span><span id="__span-0-12"><a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a>    <span class="n">task_content</span><span class="o">=</span><span class="s2">&quot;Analyze AI trends in 2024&quot;</span>
</span><span id="__span-0-13"><a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a><span class="p">)</span>
</span><span id="__span-0-14"><a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a>
</span><span id="__span-0-15"><a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a><span class="c1"># 3. Create configuration (PILOT/COPILOT/NAVIGATOR)</span>
</span><span id="__span-0-16"><a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a><span class="c1"># PILOT level provides basic context management</span>
</span><span id="__span-0-17"><a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AmniConfigFactory</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="n">AmniConfigLevel</span><span class="o">.</span><span class="n">PILOT</span><span class="p">)</span>
</span><span id="__span-0-18"><a id="__codelineno-0-18" name="__codelineno-0-18" href="#__codelineno-0-18"></a>
</span><span id="__span-0-19"><a id="__codelineno-0-19" name="__codelineno-0-19" href="#__codelineno-0-19"></a><span class="c1"># 4. Create context from input (Asynchronous)</span>
</span><span id="__span-0-20"><a id="__codelineno-0-20" name="__codelineno-0-20" href="#__codelineno-0-20"></a><span class="n">context</span> <span class="o">=</span> <span class="k">await</span> <span class="n">ApplicationContext</span><span class="o">.</span><span class="n">from_input</span><span class="p">(</span><span class="n">task_input</span><span class="p">,</span> <span class="n">context_config</span><span class="o">=</span><span class="n">config</span><span class="p">)</span>
</span></code></pre></div>
<h3 id="42-neurons-assembly">4.2 Neurons &amp; Assembly</h3>
<p>The core philosophy of AWorld is: <strong>Treat every structured piece of information in the Prompt as a "Neuron"</strong>. Context is no longer a disorganized pile of text but a "digital brain" dynamically assembled from multiple sensory-capable neurons.</p>
<h4 id="1-context-processing-pipeline-op-neuron">1. Context Processing Pipeline: Op -&gt; Neuron</h4>
<p>The flow of information follows a pipeline model of <strong>"Processing (Op) -&gt; Expression (Neuron)"</strong>:</p>
<ul>
<li><strong>Context Op</strong>: Responsible for extracting, cleaning, and structuring information from raw inputs (e.g., tool execution results, dialogue history).</li>
<li><strong>Neuron</strong>: Responsible for presenting the processed information to the model in the optimal format (e.g., XML) within the Prompt.</li>
</ul>
<h4 id="2-variable-access-and-auto-assembly">2. Variable Access and Auto-Assembly</h4>
<p>Context provides a simple KV interface and supports dynamic referencing in Prompt templates via <code>{{xxx}}</code> syntax.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="c1"># Store runtime variables (Working Memory)</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="n">context</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;focus_area&quot;</span><span class="p">,</span> <span class="s2">&quot;LLM Context Window&quot;</span><span class="p">)</span>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="c1"># Retrieve variables (Supports automatic upward backtracing to parent context)</span>
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="n">area</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;focus_area&quot;</span><span class="p">)</span>
</span></code></pre></div>
<h4 id="3-customization">3. Customization</h4>
<p>Developers can easily extend custom neurons and processing operations based on specific business scenarios.</p>
<p><strong>Custom Neuron Example:</strong></p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">aworld.core.context.amni.prompt.neurons</span><span class="w"> </span><span class="kn">import</span> <span class="n">Neuron</span><span class="p">,</span> <span class="n">neuron_factory</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="nd">@neuron_factory</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;user_preference&quot;</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="s2">&quot;Custom user preference neuron&quot;</span><span class="p">)</span>
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="k">class</span><span class="w"> </span><span class="nc">UserPreferenceNeuron</span><span class="p">(</span><span class="n">Neuron</span><span class="p">):</span>
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">format</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">:</span> <span class="n">ApplicationContext</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="__span-2-6"><a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a>        <span class="n">pref</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;user_pref&quot;</span><span class="p">)</span>
</span><span id="__span-2-7"><a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;&lt;user_pref&gt;</span><span class="si">{</span><span class="n">pref</span><span class="si">}</span><span class="s2">&lt;/user_pref&gt;&quot;</span>
</span></code></pre></div>
<p><strong>Custom Processing Operation (Op) Example:</strong></p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">aworld.core.context.amni.processor.op</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseOp</span><span class="p">,</span> <span class="n">memory_op</span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="nd">@memory_op</span><span class="p">(</span><span class="s2">&quot;extract_pref&quot;</span><span class="p">)</span>
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="k">class</span><span class="w"> </span><span class="nc">ExtractPreferenceOp</span><span class="p">(</span><span class="n">BaseOp</span><span class="p">):</span>
</span><span id="__span-3-5"><a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a>    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">:</span> <span class="n">ApplicationContext</span><span class="p">):</span>
</span><span id="__span-3-6"><a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a>        <span class="c1"># Logic: Analyze and extract preferences from dialogue, store in KV</span>
</span><span id="__span-3-7"><a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a>        <span class="n">context</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;user_pref&quot;</span><span class="p">,</span> <span class="s2">&quot;High Precision&quot;</span><span class="p">)</span>
</span></code></pre></div>
<h4 id="4-advanced-prompt-assembly-example">4. Advanced Prompt Assembly Example</h4>
<p><code>PromptService</code> supports referencing various built-in and custom neurons:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="n">template</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="s2"># Task and Environment</span>
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="s2">Goal: {{task_input}}</span>
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a><span class="s2">Active Working Directory: {{working_dir}}</span>
</span><span id="__span-4-5"><a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a>
</span><span id="__span-4-6"><a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a><span class="s2"># Cognitive Neurons</span>
</span><span id="__span-4-7"><a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a><span class="s2">Key Facts: {{facts}}</span>
</span><span id="__span-4-8"><a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a><span class="s2">User Preference: {{user_preference}}  # Reference custom neuron</span>
</span><span id="__span-4-9"><a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a>
</span><span id="__span-4-10"><a id="__codelineno-4-10" name="__codelineno-4-10" href="#__codelineno-4-10"></a><span class="s2"># History Backtrace</span>
</span><span id="__span-4-11"><a id="__codelineno-4-11" name="__codelineno-4-11" href="#__codelineno-4-11"></a><span class="s2">Root Task Goal: {{root.task_input}}</span>
</span><span id="__span-4-12"><a id="__codelineno-4-12" name="__codelineno-4-12" href="#__codelineno-4-12"></a><span class="s2">&quot;&quot;&quot;</span>
</span><span id="__span-4-13"><a id="__codelineno-4-13" name="__codelineno-4-13" href="#__codelineno-4-13"></a>
</span><span id="__span-4-14"><a id="__codelineno-4-14" name="__codelineno-4-14" href="#__codelineno-4-14"></a><span class="c1"># Execute formatting; the system will automatically call the format method of each neuron</span>
</span><span id="__span-4-15"><a id="__codelineno-4-15" name="__codelineno-4-15" href="#__codelineno-4-15"></a><span class="n">prompt</span> <span class="o">=</span> <span class="k">await</span> <span class="n">context</span><span class="o">.</span><span class="n">prompt_service</span><span class="o">.</span><span class="n">async_format</span><span class="p">(</span><span class="n">template</span><span class="p">)</span>
</span></code></pre></div>
<h3 id="43-knowledge-usage">4.3 Knowledge Usage</h3>
<p>Knowledge refers to unstructured or semi-structured data (Artifacts) stored in the Workspace, which can be indexed and referenced through context.</p>
<h4 id="adding-knowledge">Adding Knowledge</h4>
<div class="language-python highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">aworld.output</span><span class="w"> </span><span class="kn">import</span> <span class="n">Artifact</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="c1"># 1. Create artifact (e.g., a research report)</span>
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a><span class="n">artifact</span> <span class="o">=</span> <span class="n">Artifact</span><span class="p">(</span>
</span><span id="__span-5-5"><a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a>    <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;report_001&quot;</span><span class="p">,</span>
</span><span id="__span-5-6"><a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a>    <span class="n">content</span><span class="o">=</span><span class="s2">&quot;AWorld uses distributed context management...&quot;</span><span class="p">,</span>
</span><span id="__span-5-7"><a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a>    <span class="n">metadata</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;text&quot;</span><span class="p">,</span> <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;research&quot;</span><span class="p">}</span>
</span><span id="__span-5-8"><a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a><span class="p">)</span>
</span><span id="__span-5-9"><a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a>
</span><span id="__span-5-10"><a id="__codelineno-5-10" name="__codelineno-5-10" href="#__codelineno-5-10"></a><span class="c1"># 2. Add knowledge to context (Automatic indexing)</span>
</span><span id="__span-5-11"><a id="__codelineno-5-11" name="__codelineno-5-11" href="#__codelineno-5-11"></a><span class="k">await</span> <span class="n">context</span><span class="o">.</span><span class="n">add_knowledge</span><span class="p">(</span><span class="n">artifact</span><span class="p">)</span>
</span></code></pre></div>
<h4 id="referencing-knowledge-in-prompt">Referencing Knowledge in Prompt</h4>
<p>You can inject knowledge content directly into the Prompt using specific path syntax:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="c1"># Reference full content</span>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="n">prompt_with_content</span> <span class="o">=</span> <span class="k">await</span> <span class="n">context</span><span class="o">.</span><span class="n">prompt_service</span><span class="o">.</span><span class="n">async_format</span><span class="p">(</span>
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a>    <span class="s2">&quot;Refer to report content: {{knowledge/report_001/content}}&quot;</span>
</span><span id="__span-6-4"><a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a><span class="p">)</span>
</span><span id="__span-6-5"><a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a>
</span><span id="__span-6-6"><a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a><span class="c1"># Reference auto-generated summary (Requires corresponding configuration)</span>
</span><span id="__span-6-7"><a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a><span class="n">prompt_with_summary</span> <span class="o">=</span> <span class="k">await</span> <span class="n">context</span><span class="o">.</span><span class="n">prompt_service</span><span class="o">.</span><span class="n">async_format</span><span class="p">(</span>
</span><span id="__span-6-8"><a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a>    <span class="s2">&quot;Report summary: {{knowledge/report_001/summary}}&quot;</span>
</span><span id="__span-6-9"><a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a><span class="p">)</span>
</span></code></pre></div>
<hr />
<h2 id="5-advanced-usage">5. Advanced Usage</h2>
<p>Advanced usage is suitable for multi-agent collaboration, ultra-long tasks, and automated cognitive processing.</p>
<h3 id="51-context-offloading">5.1 Context Offloading</h3>
<p>For massive tool outputs (e.g., vast web content), the system will automatically or manually offload them from the context to the Workspace.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="c1"># 1. Auto-offload configuration (Enabled by default at COPILOT/NAVIGATOR levels)</span>
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AmniConfigFactory</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a>    <span class="n">level</span><span class="o">=</span><span class="n">AmniConfigLevel</span><span class="o">.</span><span class="n">COPILOT</span><span class="p">,</span>
</span><span id="__span-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a>    <span class="n">tool_result_offload</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="__span-7-5"><a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a>    <span class="n">tool_result_length_threshold</span><span class="o">=</span><span class="mi">30000</span>  <span class="c1"># Auto-offload if exceeds 30k characters</span>
</span><span id="__span-7-6"><a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a><span class="p">)</span>
</span><span id="__span-7-7"><a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a>
</span><span id="__span-7-8"><a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a><span class="c1"># 2. Manual offload execution</span>
</span><span id="__span-7-9"><a id="__codelineno-7-9" name="__codelineno-7-9" href="#__codelineno-7-9"></a><span class="k">await</span> <span class="n">context</span><span class="o">.</span><span class="n">offload_by_workspace</span><span class="p">(</span><span class="n">artifacts</span><span class="p">)</span>
</span></code></pre></div>
<h3 id="52-hierarchical-tasks-planning">5.2 Hierarchical Tasks &amp; Planning</h3>
<p>A core advantage of AmniContext is its native support for <strong>Planning mode</strong>. It decomposes complex macro goals into executable micro atomic tasks through a Task Tree and automatically manages the flow of context between them.</p>
<h4 id="core-capabilities-multi-task-decomposition-and-parallelism">Core Capabilities: Multi-task Decomposition and Parallelism</h4>
<ul>
<li><strong>Recursive Decomposition</strong>: Agents can dynamically generate N sub-tasks based on the main task goal, each with its own <code>SubContext</code>.</li>
<li><strong>Inheritance</strong>: Sub-contexts automatically inherit the parent's <code>kv_store</code> and environment configurations, ensuring sub-tasks have global Contextual Awareness during execution.</li>
<li><strong>Consolidation</strong>: When a sub-task is completed, results, facts, and token consumption are asynchronously merged back into the main context via <code>merge_sub_context</code>.</li>
</ul>
<h4 id="example-task-lifecycle-in-planning-mode">Example: Task Lifecycle in Planning Mode</h4>
<div class="language-python highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="c1"># 1. Build sub-context (Triggered by Planner Agent)</span>
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="c1"># The system automatically establishes parent-child references and clones the necessary runtime environment</span>
</span><span id="__span-8-3"><a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a><span class="n">sub_context</span> <span class="o">=</span> <span class="k">await</span> <span class="n">context</span><span class="o">.</span><span class="n">build_sub_context</span><span class="p">(</span>
</span><span id="__span-8-4"><a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a>    <span class="n">sub_task_content</span><span class="o">=</span><span class="s2">&quot;Investigate technical details of long-context models&quot;</span><span class="p">,</span>
</span><span id="__span-8-5"><a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a>    <span class="n">sub_task_id</span><span class="o">=</span><span class="s2">&quot;sub_task_001&quot;</span><span class="p">,</span>
</span><span id="__span-8-6"><a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a>    <span class="n">task_type</span><span class="o">=</span><span class="s2">&quot;normal&quot;</span> <span class="c1"># Supports normal or background (asynchronous)</span>
</span><span id="__span-8-7"><a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a><span class="p">)</span>
</span><span id="__span-8-8"><a id="__codelineno-8-8" name="__codelineno-8-8" href="#__codelineno-8-8"></a>
</span><span id="__span-8-9"><a id="__codelineno-8-9" name="__codelineno-8-9" href="#__codelineno-8-9"></a><span class="c1"># 2. Precise context isolation and backtrace</span>
</span><span id="__span-8-10"><a id="__codelineno-8-10" name="__codelineno-8-10" href="#__codelineno-8-10"></a><span class="c1"># Sub-tasks only focus on their own input but can access parent background via {{parent.xxx}}</span>
</span><span id="__span-8-11"><a id="__codelineno-8-11" name="__codelineno-8-11" href="#__codelineno-8-11"></a><span class="n">parent_goal</span> <span class="o">=</span> <span class="k">await</span> <span class="n">sub_context</span><span class="o">.</span><span class="n">prompt_service</span><span class="o">.</span><span class="n">async_format</span><span class="p">(</span><span class="s2">&quot;{{parent.task_input}}&quot;</span><span class="p">)</span>
</span><span id="__span-8-12"><a id="__codelineno-8-12" name="__codelineno-8-12" href="#__codelineno-8-12"></a>
</span><span id="__span-8-13"><a id="__codelineno-8-13" name="__codelineno-8-13" href="#__codelineno-8-13"></a><span class="c1"># 3. Task execution and state merging</span>
</span><span id="__span-8-14"><a id="__codelineno-8-14" name="__codelineno-8-14" href="#__codelineno-8-14"></a><span class="c1"># After task completion, facts and KV variables generated by the sub-task are automatically updated to the parent task</span>
</span><span id="__span-8-15"><a id="__codelineno-8-15" name="__codelineno-8-15" href="#__codelineno-8-15"></a><span class="n">context</span><span class="o">.</span><span class="n">merge_sub_context</span><span class="p">(</span><span class="n">sub_context</span><span class="p">)</span>
</span></code></pre></div>
<h4 id="parallel-execution-support">Parallel Execution Support</h4>
<p>In distributed scenarios, AmniContext supports multiple sub-tasks <strong>running in parallel</strong> across different execution engines. Each node maintains context consistency through <code>snapshot</code> and <code>restore</code>, ultimately achieving global state consolidation at the root node.</p>
<h3 id="53-agent-isolation">5.3 Agent Isolation</h3>
<p>Establishes an independent private state space for each Agent to prevent variable pollution.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="c1"># 1. Initialize Agent private state</span>
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a><span class="k">await</span> <span class="n">context</span><span class="o">.</span><span class="n">build_agents_state</span><span class="p">([</span><span class="n">web_agent</span><span class="p">,</span> <span class="n">analyst_agent</span><span class="p">])</span>
</span><span id="__span-9-3"><a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a>
</span><span id="__span-9-4"><a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a><span class="c1"># 2. Access in specific namespace</span>
</span><span id="__span-9-5"><a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a><span class="n">context</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;search_history&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;link1&quot;</span><span class="p">,</span> <span class="s2">&quot;link2&quot;</span><span class="p">],</span> <span class="n">namespace</span><span class="o">=</span><span class="n">web_agent</span><span class="o">.</span><span class="n">id</span><span class="p">())</span>
</span></code></pre></div>
<h3 id="54-environment-integration-freedom-space">5.4 Environment Integration &amp; Freedom Space</h3>
<p><code>FreedomSpaceService</code> provides an isolated "Freedom Space" (working directory) for the Agent. Its core capability is achieving <strong>file system sharing between persistent storage and execution environments (Sandbox/Docker)</strong>.</p>
<h4 id="core-features">Core Features</h4>
<ul>
<li><strong>File System Mapping</strong>: Files operated by the Agent in Freedom Space are automatically mapped to <code>env_mount_path</code> in the execution environment.</li>
<li><strong>Transparent Access</strong>: Code written or artifacts generated by the Agent are transparently synchronized between the physical storage layer (local/OSS) and the logical execution layer (Docker).</li>
<li><strong>Persistence Guarantee</strong>: Even if the execution environment is destroyed, data in the Freedom Space remains in the Workspace, supporting cross-task recovery.</li>
</ul>
<h4 id="example-configuration-and-usage">Example: Configuration and Usage</h4>
<div class="language-python highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="c1"># 1. Configure environment sharing parameters</span>
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="n">config</span> <span class="o">=</span> <span class="n">AmniConfigFactory</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="n">AmniConfigLevel</span><span class="o">.</span><span class="n">COPILOT</span><span class="p">)</span>
</span><span id="__span-10-3"><a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a><span class="n">config</span><span class="o">.</span><span class="n">env_config</span><span class="o">.</span><span class="n">env_type</span> <span class="o">=</span> <span class="s2">&quot;remote&quot;</span> <span class="c1"># Enable remote/sandbox mode</span>
</span><span id="__span-10-4"><a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a><span class="n">config</span><span class="o">.</span><span class="n">env_config</span><span class="o">.</span><span class="n">env_mount_path</span> <span class="o">=</span> <span class="s2">&quot;/workspace&quot;</span> <span class="c1"># Mount point inside the execution environment</span>
</span><span id="__span-10-5"><a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a>
</span><span id="__span-10-6"><a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a><span class="c1"># 2. Add file to Freedom Space and get environment path</span>
</span><span id="__span-10-7"><a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a><span class="n">success</span><span class="p">,</span> <span class="n">env_abs_path</span><span class="p">,</span> <span class="n">content</span> <span class="o">=</span> <span class="k">await</span> <span class="n">context</span><span class="o">.</span><span class="n">freedom_space_service</span><span class="o">.</span><span class="n">add_file</span><span class="p">(</span>
</span><span id="__span-10-8"><a id="__codelineno-10-8" name="__codelineno-10-8" href="#__codelineno-10-8"></a>    <span class="n">filename</span><span class="o">=</span><span class="s2">&quot;data_process.py&quot;</span><span class="p">,</span>
</span><span id="__span-10-9"><a id="__codelineno-10-9" name="__codelineno-10-9" href="#__codelineno-10-9"></a>    <span class="n">content</span><span class="o">=</span><span class="s2">&quot;import os</span><span class="se">\n</span><span class="s2">print(os.getcwd())&quot;</span><span class="p">,</span>
</span><span id="__span-10-10"><a id="__codelineno-10-10" name="__codelineno-10-10" href="#__codelineno-10-10"></a>    <span class="n">mime_type</span><span class="o">=</span><span class="s2">&quot;text/x-python&quot;</span>
</span><span id="__span-10-11"><a id="__codelineno-10-11" name="__codelineno-10-11" href="#__codelineno-10-11"></a><span class="p">)</span>
</span><span id="__span-10-12"><a id="__codelineno-10-12" name="__codelineno-10-12" href="#__codelineno-10-12"></a><span class="c1"># env_abs_path will return &quot;/workspace/data_process.py&quot;</span>
</span><span id="__span-10-13"><a id="__codelineno-10-13" name="__codelineno-10-13" href="#__codelineno-10-13"></a>
</span><span id="__span-10-14"><a id="__codelineno-10-14" name="__codelineno-10-14" href="#__codelineno-10-14"></a><span class="c1"># 3. Use in code executor</span>
</span><span id="__span-10-15"><a id="__codelineno-10-15" name="__codelineno-10-15" href="#__codelineno-10-15"></a><span class="c1"># The Agent can directly execute files under this path in the sandbox</span>
</span></code></pre></div>
<h4 id="path-variable-reference">Path Variable Reference</h4>
<p>In Prompt templates, the following variables can be used for precise environment referencing:</p>
<ul>
<li><code>{{working_dir_env_mounted_path}}</code>: Gets the absolute mount path of Freedom Space in the execution environment.</li>
<li><code>{{working_dir}}</code>: Returns a formatted list of all mounted files in Freedom Space (XML format, including filenames and absolute paths).</li>
<li><code>{{current_working_directory}}</code>: Gets the operating system running directory of the current process.</li>
</ul>
<h3 id="55-autonomous-cognition">5.5 Autonomous Cognition</h3>
<p>At the <code>NAVIGATOR</code> level, the system fully enables an "autopilot" mode based on a "cognitive closed loop," achieving <strong>System Prompt Augment</strong> and <strong>Dynamic Tool Injection</strong>:</p>
<ul>
<li><strong>System Prompt Augment</strong>: The system automatically concatenates "neurons" such as current task status, working directory file lists, and basic environment information into the Agent's System Prompt based on configured <code>neuron_names</code> (e.g., <code>task</code>, <code>working_dir</code>, <code>skills</code>, <code>basic</code>).</li>
<li><strong>Dynamic Tool Injection</strong>: Via the <code>skills</code> neuron, the system automatically injects a list of available tools (Skills) and usage guides for the Agent.<ul>
<li><strong>Progressive Disclosure</strong>: Initially only tool summaries are injected. When the Agent decides it needs a specific skill, it dynamically loads the full tool Schema and instructions via <code>active_skill</code>.</li>
<li><strong>Automatic Guidance</strong>: Automatically concatenates <code>&lt;skills_guide&gt;</code>, informing the Agent how to manage its own skill stack (Activate/Offload).</li>
</ul>
</li>
<li><strong>Automated Reasoning Orchestrator</strong>: Enables autonomous reasoning orchestration. The system automatically drives the reasoning engine for strategy formulation and task logic flow decomposition based on goals. Enabling this automatically injects the <code>context_planning</code> tool.</li>
<li><strong>Automated Cognitive Ingestion</strong>: Enables automatic cognitive ingestion. Enabling this automatically injects the <code>context_knowledge</code> tool and simultaneously loads <code>todo</code> (task list) and <code>action_info</code> (execution history) neurons.</li>
<li><strong>Automated Memory Recursive</strong>: Enables recursive experience loops.</li>
<li><strong>Automated Memory Recall</strong>: Enables automatic memory recall.</li>
</ul>
<hr />
<h2 id="6-scenario-based-strategies">6. Scenario-based Strategies</h2>
<p>Strategies should be chosen flexibly based on task complexity:</p>
<h3 id="61-scenario-1-simple-chat">6.1 Scenario 1: Simple Chat</h3>
<ul>
<li><strong>Features</strong>: Clear goals, no reliance on complex files or long history.</li>
<li><strong>Recommended Strategy</strong>:<ul>
<li><strong>Config Level</strong>: <code>AmniConfigLevel.PILOT</code></li>
<li><strong>Core Neurons</strong>: <code>basic</code> + <code>task</code></li>
<li><strong>Details</strong>: Maintain low <code>history_rounds</code> (e.g., 5-10); no need for auto-summary or offloading.</li>
</ul>
</li>
</ul>
<h3 id="62-scenario-2-complex-research-rag">6.2 Scenario 2: Complex Research (RAG)</h3>
<ul>
<li><strong>Features</strong>: Needs to read many documents/webpages; retrieval recall is key.</li>
<li><strong>Recommended Strategy</strong>:<ul>
<li><strong>Config Level</strong>: <code>AmniConfigLevel.COPILOT</code></li>
<li><strong>Core Neurons</strong>: <code>knowledge</code> + <code>summaries</code></li>
<li><strong>Practice</strong>: Force <strong>Contextual Retrieval</strong> and utilize <strong>Prompt Caching</strong> for large reference materials.</li>
</ul>
</li>
</ul>
<h3 id="63-scenario-3-planning-intensive-tasks">6.3 Scenario 3: Planning Intensive Tasks</h3>
<ul>
<li><strong>Features</strong>: Long task chains, multiple sub-tasks, frequent tool calls, needs Task Tree awareness.</li>
<li><strong>Recommended Strategy</strong>:<ul>
<li><strong>Config Level</strong>: <code>AmniConfigLevel.NAVIGATOR</code></li>
<li><strong>Core Neurons</strong>: <code>task</code> + <code>todo</code> + <code>action_info</code></li>
<li><strong>Capabilities</strong>: Enable <code>automated_reasoning_orchestrator</code> for autonomous task management.</li>
</ul>
</li>
</ul>
<h3 id="64-scenario-4-code-sandbox-collaboration">6.4 Scenario 4: Code Sandbox Collaboration</h3>
<ul>
<li><strong>Features</strong>: Relies on file systems, frequent reads/writes of artifacts.</li>
<li><strong>Recommended Strategy</strong>:<ul>
<li><strong>Config Level</strong>: <code>AmniConfigLevel.COPILOT</code> / <code>NAVIGATOR</code></li>
<li><strong>Core Neurons</strong>: <code>working_dir</code> + <code>skills</code></li>
<li><strong>Integration</strong>: Configure <code>env_mount_path</code> for file sharing.</li>
</ul>
</li>
</ul>
<hr />
<h2 id="7-best-practices-guide">7. Best Practices Guide</h2>
<ol>
<li><strong>Attention Budget Management</strong>: Always follow the "Minimum Necessity Principle."</li>
<li><strong>Namespace Isolation</strong>: In multi-agent collaboration, always use the <code>namespace</code> parameter.</li>
<li><strong>Structured Processing Flow</strong>: Prioritize storing raw data as Artifacts and use <code>Context Op</code> for recursive summarization.</li>
</ol>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Â© Copyright 2025 inclusionAI AWorld Team.
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": ["navigation.instant", "navigation.tracking", "navigation.tabs", "toc.follow", "content.code.copy", "content.code.annotate", "content.action.edit", "header.autohide"], "search": "../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
        <script src="../../js/hide-home-edit.js"></script>
      
        <script src="../../js/aworld-enhancements.js"></script>
      
        <script src="../../js/github-stars.js"></script>
      
        <script src="../../js/github-stats-fallback.js"></script>
      
    
  </body>
</html>